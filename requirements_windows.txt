# Mirage-in-the-Eyes - Windows 11 最小复现依赖
# 适用于: RTX 4060 Laptop (8GB VRAM)
# 方案 A: MiniGPT-4 基础推理功能

# ============================================
# 核心深度学习框架
# ============================================
# PyTorch 相关 - 需要单独安装（见下方说明）
# pip install torch==2.0.1 torchvision==0.15.2 torchaudio==2.0.2 --index-url https://download.pytorch.org/whl/cu118

# ============================================
# 基础数值计算和工具
# ============================================
numpy==1.24.3
scipy==1.9.1
pillow==10.3.0
tqdm==4.66.4
requests==2.32.3
filelock==3.15.4

# ============================================
# Transformers 生态（使用本地版本）
# ============================================
# transformers - 使用项目提供的 transformers-4.29.2（需单独安装）
tokenizers==0.13.3
sentencepiece==0.1.99
safetensors==0.4.3
accelerate==0.19.0
peft==0.12.0

# ============================================
# 计算机视觉和图像处理
# ============================================
opencv-python==4.7.0.72
timm==0.4.12
einops==0.8.0
einops-exts==0.0.4
# CLIP - 需要从 GitHub 安装（见下方说明）
# pip install git+https://github.com/openai/CLIP.git
open_clip_torch==2.26.1
decord==0.6.0

# ============================================
# BLIP/LAVIS 依赖
# ============================================
omegaconf==2.3.0
webdataset==0.2.48
iopath==0.1.10

# ============================================
# 数据处理
# ============================================
pandas==2.0.1
pyarrow==17.0.0
pyarrow-hotfix==0.6
datasets==2.20.0
dill==0.3.8
multiprocess==0.70.16

# ============================================
# 可视化
# ============================================
matplotlib==3.7.1
seaborn==0.13.0
contourpy==1.2.1
cycler==0.12.1
fonttools==4.53.0
kiwisolver==1.4.5

# ============================================
# 配置和序列化
# ============================================
pyyaml==6.0.1
jsonschema==4.23.0
jsonschema-specifications==2023.12.1
jsonpatch==1.33
jsonpointer==3.0.0

# ============================================
# 网络和 API（用于模型下载和评估）
# ============================================
aiohttp==3.9.5
aiosignal==1.3.1
async-timeout==4.0.3
frozenlist==1.4.1
yarl==1.9.4
multidict==6.0.5
aiofiles==23.2.1
httpx==0.24.1
httpcore==0.15.0
h11==0.12.0
certifi==2024.6.2
charset-normalizer==3.3.2
idna==3.7
urllib3==2.2.2

# ============================================
# Hugging Face Hub（用于下载模型）
# ============================================
huggingface-hub==0.26.2
fsspec==2024.5.0

# ============================================
# 其他工具库
# ============================================
beautifulsoup4==4.12.3
soupsieve==2.5
python-dateutil==2.24.1
pytz==2024.1
regex==2.32.3
six==1.16.0
packaging==24.1
typing_extensions==4.12.2
importlib_metadata==8.4.0
zipp==3.19.2
attrs==23.2.0
more-itertools==10.4.0

# ============================================
# 科学计算（可选）
# ============================================
scikit-learn==1.2.2
scikit-image==0.20.0
imageio==2.34.1
networkx==3.2.1
PyWavelets==1.6.0
tifffile==2024.6.18
lazy_loader==0.4
threadpoolctl==3.5.0
joblib==1.4.2

# ============================================
# 其他依赖
# ============================================
Jinja2==3.1.4
MarkupSafe==2.1.5
protobuf==5.29.2
cachetools==5.5.0
mpmath==1.3.0
sympy==1.12.1
termcolor==2.4.0
coloredlogs==15.0.1
humanfriendly==10.0

# ============================================
# 已移除的不兼容库（Windows 不支持）
# ============================================
# uvloop==0.19.0          # Linux/macOS 专用，Windows 不支持
# ptyprocess              # Unix 专用伪终端
# pexpect                 # 依赖 ptyprocess
# flash-attention==1.0.0  # 编译复杂，8GB 显存不需要
# auto_gptq==0.7.1        # 量化库，方案 A 不需要
# bitsandbytes==0.39.0    # 量化库，Windows 支持有限
# triton==2.0.0           # GPU 编程语言，Windows 支持差

# ============================================
# 所有包含本地路径的依赖已替换为标准版本
# ============================================
asttokens==2.4.1
comm==0.2.2
debugpy==1.8.7
executing==2.1.0
ipykernel==6.29.5
ipython==8.28.0
jedi==0.19.1
jupyter_client==8.6.3
jupyter_core==5.7.2
nest_asyncio==1.6.0
parso==0.8.4
pickleshare==0.7.5
prompt_toolkit==3.0.48
psutil==6.1.0
pure_eval==0.2.3
Pygments==2.18.0
pyzmq==26.2.0
stack-data==0.6.3
tornado==6.4.1
traitlets==5.14.3
wcwidth==0.2.13

# ============================================
# Git 依赖说明（需手动安装）
# ============================================
# baukit - 需要从 GitHub 安装:
#   pip install git+https://github.com/davidbau/baukit.git
#
# CLIP - 需要从 GitHub 安装:
#   pip install git+https://github.com/openai/CLIP.git
#
# transformers - 使用项目提供的本地版本:
#   先解压 transformers-4.29.2.zip
#   然后: python -m pip install -e transformers-4.29.2

# ============================================
# 安装说明
# ============================================
# 1. 创建 conda 环境:
#    conda create -n mllm python=3.9.20
#    conda activate mllm
#
# 2. 安装 PyTorch (CUDA 11.8):
#    pip install torch==2.0.1 torchvision==0.15.2 torchaudio==2.0.2 --index-url https://download.pytorch.org/whl/cu118
#
# 3. 安装本文件依赖:
#    pip install -r requirements_windows.txt
#
# 4. 安装 CLIP:
#    pip install git+https://github.com/openai/CLIP.git
#
# 5. 安装 baukit:
#    pip install git+https://github.com/davidbau/baukit.git
#
# 6. 解压并安装本地 transformers:
#    powershell -command "Expand-Archive -Force transformers-4.29.2.zip ."
#    python -m pip install -e transformers-4.29.2
#
# 7. 验证安装:
#    python -c "import torch; print(f'PyTorch: {torch.__version__}'); print(f'CUDA: {torch.cuda.is_available()}')"
